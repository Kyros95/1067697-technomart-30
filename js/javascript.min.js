const contactsLink = document.querySelector(".contacts-btn"), contactsPopup = document.querySelector(".modal-write-us"), popupClose = contactsPopup.querySelector(".modal-close"), userForm = contactsPopup.querySelector(".write-us-form"), userLogin = contactsPopup.querySelector(".modal-user-name"), userMail = contactsPopup.querySelector(".modal-user-email"), userText = contactsPopup.querySelector(".user-text"), mapLink = document.querySelector(".contacts-button-map"), mapPopup = document.querySelector(".modal-map"), mapClose = mapPopup.querySelector(".modal-close"); let isStorageSupport = !0, storage = ""; try { storage = localStorage.getItem("login") } catch (e) { isStorageSupport = !1 } contactsLink.addEventListener("click", function (e) { e.preventDefault(), contactsPopup.classList.add("modal-show"), storage ? (userLogin.value = storage, userMail.focus()) : loginLogin.focus() }), popupClose.addEventListener("click", function (e) { e.preventDefault(), contactsPopup.classList.remove("modal-show"), contactsPopup.classList.remove("modal-error") }), userForm.addEventListener("submit", function (e) { userLogin.value && userMail.value && userText.value ? isStorageSupport && localStorage.setItem("login", userLogin.value) : (e.preventDefault(), contactsPopup.classList.remove("modal-error"), contactsPopup.offsetWidth = loginPopup.offsetWidth, contactsPopup.classList.add("modal-error")) }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && contactsPopup.classList.contains("modal-show") && (e.preventDefault(), contactsPopup.classList.remove("modal-show")) }), mapLink.addEventListener("click", function (e) { e.preventDefault(), mapPopup.classList.add("modal-show") }), mapClose.addEventListener("click", function (e) { e.preventDefault(), mapPopup.classList.remove("modal-show") }), window.addEventListener("keydown", function (e) { 27 === e.keyCode && mapPopup.classList.contains("modal-show") && (e.preventDefault(), mapPopup.classList.remove("modal-show")) });
